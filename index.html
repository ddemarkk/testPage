<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme-color" content="#000000">
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
  <title>React App</title>
</head>

<body>
  <div id="root"></div>
  <script>
    "use strict";
    window.addEventListener(
      "load",
      function () {
        var script = document.createElement("script");
        script.src =
          "https://app.activechat.ai/gateway/script/15a2c47a-75e8-4c28-b2ee-dedd9a38773f";
        script.id = "ACCW_EMBED";
        document.getElementsByTagName("head")[0].appendChild(script);
        var accessToken = localStorage.getItem('accessToken');
        var idToken = sessionStorage.getItem('idToken');
        var userLogin = window.user_login;
        var userEmail = window.user_email;
        var userId = window.user_id;
        var customerNumber = window.actual_customer_no;
        window.acTrackingLoaded = function () {
          activechat.track('start');
          window.addEventListener('message', (event) => {
            console.log('Message', event.data);
            if (event.data === 'open') activechat.track('_widget_open');
            else if (event.data === 'close') activechat.track('_widget_close')
          });
          activechat.track('Authorized', {
            userLogin: userLogin,
            userEmail: userEmail,
            _email: userEmail,
            userId: userId,
            customerNumber: customerNumber,
          });
          if (accessToken && idToken) {
            activechat.track('Authorized', {
              accessToken: accessToken,
              idToken: idToken,
            });
          };
        };
      },
      false
    );
  </script>
  
</body>

</html>
